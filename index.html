<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Vigenère Cipher</title>
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
        }

        .header {
            text-align: center;
            margin: 50px 150px 50px 150px;
        }

        .form {
            margin: 50px 150px 50px 150px;
        }

        .fa-user-lock {
            padding: 15px;
            font-size: 55px;
        }

        .copyright {
            text-align: center;
        }

        .history {
            background-color: #1B1B1B;
            color: white;
            border-radius: 10px;
        }

        .history p {
            margin: 30px;
        }

        .history p:nth-child(3) {
            text-align: right;
        }

    </style>
    <!-- JS -->
    <script src="https://kit.fontawesome.com/ec05ceb83d.js" crossorigin="anonymous"></script>
    <script>
        function Cifra(testoChiaro, testoCifrato, chiave) {
            var alphabet_upper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            var alphabet_lower = 'abcdefghijklmnopqrstuvwxyz';

            testoCifrato.value = "";

            var key_len = chiave.value.length;

            var len = testoChiaro.value.length;

            for (var i = 0; i < len; i++) {
                var ch = testoChiaro.value.charAt(i);
                var key_ch = chiave.value.charAt(i%key_len);
                
                if (ch >= 'A' & ch <= 'Z') { //Controllo se sia una lettera maiuscola
                    var pos = alphabet_upper.indexOf(ch);
                    pos += alphabet_lower.indexOf(key_ch);
                    pos %= 26;
                    testoCifrato.value += alphabet_upper.charAt(pos);
                } else {
                    if (ch >= 'a' & ch <= 'z') { //Controllo se sia una lettera minuscola
                        var pos = alphabet_lower.indexOf(ch);
                        pos += alphabet_lower.indexOf(key_ch);
                        pos %= 26;
                        testoCifrato.value += alphabet_lower.charAt(pos);
                    } else {
                        testoCifrato.value += ch;
                    }
                }
            }
        }

    </script>
</head>

<body>
    <div class="header">
        <h1>
            <div class="fas fa-user-lock"></div><br>VIGENERE CIPHER
        </h1>
        <p>
            Questa pagina web si occuperà di crittografare i vostri testi!
        </p>
        <div class="history">
            <h4> Un po' di Storia </h4>
            <p>Pubblicato nel 1586, il cifrario di Blaise de Vigenère fu ritenuto per secoli inattaccabile, godendo di una fama in buona parte immeritata essendo molto più debole di altri cifrari polialfabetici precedenti, quali il disco cifrante dell'Alberti, o le cifre del Bellaso. Una fama che è durata per molti anni anche dopo la scoperta del primo metodo di crittanalisi da parte di Charles Babbage, e la successiva formalizzazione da parte del maggiore Friedrich Kasiski: il Metodo Kasiski del 1863.
            </p>
            <p>
                Credit Wikipedia
            </p>
        </div>
    </div>
    <div class="form">
        <form>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-default">Testo in chiaro</span>
                </div>
                <input type="text" name="plaintext" class="form-control" value="Inserisci qui il testo">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-default">Chiave alfabetica</span>
                </div>
                <input type="text" name="key" value="ciao" class="form-control">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="inputGroup-sizing-default">Testo cifrato</span>
                </div>
                <input type="text" name="ciphertext" class="form-control">
            </div>
            <input type="button" value="Cifra" onclick="Cifra(plaintext,ciphertext,key)" class="btn btn-dark">
            <input type="reset" value="Cancella" class="btn btn-dark">
        </form>
    </div>
    <footer class="copyright">
        <span>
            <p>Copyright &copy; 2021 - Francesco La Barbera</p>
        </span>
    </footer>
</body>

</html>